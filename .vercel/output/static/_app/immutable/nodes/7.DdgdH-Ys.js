import{s as w,n as C,o as S,e as B}from"../chunks/scheduler.BVKwUkgL.js";import{S as j,i as A,e as k,c as b,a as O,d as y,h as E,z as M,j as L,o as q,p as D,q as I,m as N,n as V,r as G,s as F,g as H,f as J,w as T,k as R,x as K,v as Q,t as U,b as W,l as X}from"../chunks/index.BJVizwO2.js";import{e as P}from"../chunks/each.D6YF6ztN.js";import{s as Y}from"../chunks/stores.BsF8LMy-.js";import{C as $}from"../chunks/Card.qpc5-zEe.js";import{_ as ee}from"../chunks/preload-helper.D6kgxu3v.js";function te(s){let e;return{c(){e=k("div"),this.h()},l(t){e=b(t,"DIV",{id:!0,class:!0,style:!0}),O(e).forEach(y),this.h()},h(){E(e,"id",s[0]),E(e,"class","box"),M(e,"height",s[1]+"vh")},m(t,a){L(t,e,a)},p(t,[a]){a&1&&E(e,"id",t[0]),a&2&&M(e,"height",t[1]+"vh")},i:C,o:C,d(t){t&&y(e)}}}function ae(s,e,t){let{id:a="home-map-id"}=e,{height:o=80}=e,{location:l={lat:53.2734,lng:-7.7783203}}=e,{zoom:c=8}=e,{minZoom:u=7}=e,{activeLayer:g="Terrain"}=e,{trektypes:d=[]}=e,{placemarks:r=[]}=e,p,n,f={},_;S(async()=>{{const i=await ee(()=>import("../chunks/leaflet-src.DTmlu4rB.js").then(m=>m.l),[],import.meta.url);_={Terrain:i.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:"Map data: Â© OpenStreetMap contributors"})};let v=_[g];p=i.map(a,{center:[l.lat,l.lng],zoom:c,minZoom:u,layers:[v]}),n=i.control.layers(_).addTo(p),d.forEach(m=>{f[m._id]=i.layerGroup().addTo(p),n.addOverlay(f[m._id],m.title)}),r.forEach(m=>{if(m.trektype&&typeof m.trektype!="string"){const x=i.marker([m.lat,m.lng]);x.bindPopup(`${m.trektype.title}: ${m.poi}`),f[m.trektype._id].addLayer(x)}})}});function h(i){i==="all"?Object.values(f).forEach(v=>v.addTo(p)):Object.keys(f).forEach(v=>{const m=f[v];v===i?m.addTo(p):m.remove()})}return s.$$set=i=>{"id"in i&&t(0,a=i.id),"height"in i&&t(1,o=i.height),"location"in i&&t(2,l=i.location),"zoom"in i&&t(3,c=i.zoom),"minZoom"in i&&t(4,u=i.minZoom),"activeLayer"in i&&t(5,g=i.activeLayer),"trektypes"in i&&t(6,d=i.trektypes),"placemarks"in i&&t(7,r=i.placemarks)},[a,o,l,c,u,g,d,r,h]}class ne extends j{constructor(e){super(),A(this,e,ae,te,w,{id:0,height:1,location:2,zoom:3,minZoom:4,activeLayer:5,trektypes:6,placemarks:7,updateMarkers:8})}get updateMarkers(){return this.$$.ctx[8]}}function z(s,e,t){const a=s.slice();return a[4]=e[t],a}function Z(s){let e,t=s[4].title+"",a,o;return{c(){e=k("option"),a=U(t),this.h()},l(l){e=b(l,"OPTION",{});var c=O(e);a=W(c,t),c.forEach(y),this.h()},h(){e.__value=o=s[4]._id,T(e,e.__value)},m(l,c){L(l,e,c),R(e,a)},p(l,c){c&1&&t!==(t=l[4].title+"")&&X(a,t),c&1&&o!==(o=l[4]._id)&&(e.__value=o,T(e,e.__value))},d(l){l&&y(e)}}}function le(s){let e,t,a="All Trektypes",o,l,c,u,g,d=P(s[0].trektypes),r=[];for(let n=0;n<d.length;n+=1)r[n]=Z(z(s,d,n));let p={height:60};return l=new ne({props:p}),s[3](l),{c(){e=k("select"),t=k("option"),t.textContent=a;for(let n=0;n<r.length;n+=1)r[n].c();o=F(),q(l.$$.fragment),this.h()},l(n){e=b(n,"SELECT",{});var f=O(e);t=b(f,"OPTION",{"data-svelte-h":!0}),H(t)!=="svelte-1cfngc1"&&(t.textContent=a);for(let _=0;_<r.length;_+=1)r[_].l(f);f.forEach(y),o=J(n),D(l.$$.fragment,n),this.h()},h(){t.__value="all",T(t,t.__value)},m(n,f){L(n,e,f),R(e,t);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(e,null);L(n,o,f),I(l,n,f),c=!0,u||(g=K(e,"change",s[2]),u=!0)},p(n,f){if(f&1){d=P(n[0].trektypes);let h;for(h=0;h<d.length;h+=1){const i=z(n,d,h);r[h]?r[h].p(i,f):(r[h]=Z(i),r[h].c(),r[h].m(e,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=d.length}const _={};l.$set(_)},i(n){c||(N(l.$$.fragment,n),c=!0)},o(n){V(l.$$.fragment,n),c=!1},d(n){n&&(y(e),y(o)),Q(r,n),s[3](null),G(l,n),u=!1,g()}}}function ie(s){let e,t;return e=new $({props:{title:"Placemarks Locations",$$slots:{default:[le]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment)},l(a){D(e.$$.fragment,a)},m(a,o){I(e,a,o),t=!0},p(a,[o]){const l={};o&131&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){V(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function oe(s,e,t){let{data:a}=e,o;Y.set("Placemarks Locations"),S(()=>{o.$set({placemarks:a.placemarks,trektypes:a.trektypes})});function l(u){const g=u.target;o.updateMarkers(g.value)}function c(u){B[u?"unshift":"push"](()=>{o=u,t(1,o)})}return s.$$set=u=>{"data"in u&&t(0,a=u.data)},[a,o,l,c]}class _e extends j{constructor(e){super(),A(this,e,oe,ie,w,{data:0})}}export{_e as component};
